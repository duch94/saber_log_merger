# Дано:
Есть база данных и два типа сервисов А и Б:
* Сервисы типа А добавляют в базу записи в формате: id, name, status, timestamp.
* Сервисы типа Б читают эти данные для агрегации и прочих нужд.

В какой-то момент выясняется, что строковые имена в этих записях занимают слишком много памяти, и при этом часто 
повторяются. Поэтому целесообразно вынести их в отдельную табличку.

В результате данные должны будут добавляться в следующем формате: id, name_id, status, timestamp. Где name_id внешний 
ключ к новой таблице с полями: id, name.

Задача заключается в том, что бы составить пошаговый план миграции базы и сервисов на новый формат данных, при этом не 
разломав работоспособность системы.

#### ВАЖНО: 
1. Нельзя остановить и обновить все сервисы разом (т.е. нельзя остановить сразу все сервисы типа А, либо все сервисы 
типа Б, обновление сервисов происходит по одному за раз).
2. В базе данных атомарно можно делать только следующие запросы:
 - добавить колонку
 - удалить колонку
 - переименовать колонку

-------------------------
 
# Решение
1. Создать таблицу где будут храниться соответствия id для каждого name
2. Создать колонку name_id в таблице, а в сервисе А реализовать заполнение колонки name_id и таблицы соответствия
id -> name, после чего задеплоить новую версию сервиса А
3. Реализовать в сервисе Б работу с колонкой name_id вместо name и задеплоить новую версию сервиса Б
4. Через некоторое время, убедившись что новая логика работает, мы можем выпилить из сервиса А старую логику, где 
заполняется колонка name и, соответственно, осуществляем миграцию, в которой дропаем колонку name
